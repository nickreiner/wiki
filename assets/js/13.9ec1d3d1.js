(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{399:function(r,e,t){"use strict";t.r(e);var a=t(54),n=Object(a.a)({},(function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[t("h1",{attrs:{id:"how-to-create-a-public-mirror-for-almalinux"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#how-to-create-a-public-mirror-for-almalinux"}},[r._v("#")]),r._v(" How to create a public mirror for AlmaLinux")]),r._v(" "),t("p",[r._v("Mirrors are extremely important to provide a fast and reliable\ninfrastructure, and we are very grateful to people and organizations that\nhelp us with this. The current list of public mirrors can be found on the\n"),t("a",{attrs:{href:"https://mirrors.almalinux.org/",target:"_blank",rel:"noopener noreferrer"}},[r._v("mirrors.almalinux.org"),t("OutboundLink")],1),r._v(" website.")]),r._v(" "),t("p",[r._v("You can create a public AlmaLinux mirror in 6 easy steps:")]),r._v(" "),t("ol",[t("li",[t("p",[r._v("Make sure that you have enough free space: 300GB is the absolute minimum\nbut we recommend reserving at least 500GB.")])]),r._v(" "),t("li",[t("p",[r._v("Synchronize with the official AlmaLinux mirror via rsync:")]),r._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[r._v("/usr/bin/rsync -avSH -f "),t("span",{pre:!0,attrs:{class:"token string"}},[r._v("'R .~tmp~'")]),r._v(" --delete-delay --delay-updates rsync://rsync.repo.almalinux.org/almalinux/ /almalinux/dir/on/your/server/\n")])])])]),r._v(" "),t("li",[t("p",[r._v("Create a cron task to sync it periodically (we recommend updating the\nmirror every 3 hours):")]),r._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[r._v("0 */3 * * * /usr/bin/flock -n /var/run/almalinux_rsync.lock -c \"/usr/bin/rsync -avSH -f 'R .~tmp~' --delete-delay --delay-updates rsync://rsync.repo.almalinux.org/almalinux/ /almalinux/dir/on/your/server/\"\n")])])])]),r._v(" "),t("li",[t("p",[r._v("Ensure the accuracy of GeoIP city, longitude, and latitude data for your mirror IP(s) with MaxMind at\n"),t("a",{attrs:{href:"https://www.maxmind.com/en/geoip-demo",target:"_blank",rel:"noopener noreferrer"}},[r._v("https://www.maxmind.com/en/geoip-demo"),t("OutboundLink")],1),r._v(".\nSubmit a "),t("a",{attrs:{href:"https://support.maxmind.com/geoip-data-correction-request/",target:"_blank",rel:"noopener noreferrer"}},[r._v("correction request"),t("OutboundLink")],1),r._v(" with accurate city data\nif the information is incorrect.")]),r._v(" "),t("p",[r._v("Our mirrorlist URL tries to serve the best mirror to a client based on GeoIP data\nso having accurate GeoIP data ensures the best possible experience for users.")])]),r._v(" "),t("li",[t("p",[r._v("Join the "),t("a",{attrs:{href:"https://lists.almalinux.org/mailman3/lists/mirror-announce.lists.almalinux.org/",target:"_blank",rel:"noopener noreferrer"}},[r._v("mirror-announce"),t("OutboundLink")],1),r._v(" mailing list to receive\nimportant mirror-related updates from the AlmaLinux team.")]),r._v(" "),t("p",[r._v("You may also consider joining the "),t("a",{attrs:{href:"https://lists.almalinux.org/mailman3/lists/mirror.lists.almalinux.org/",target:"_blank",rel:"noopener noreferrer"}},[r._v("mirror"),t("OutboundLink")],1),r._v(" mailing list for\ngeneral discussion/help related to mirrors.")]),r._v(" "),t("p",[r._v("We recommend joining the "),t("a",{attrs:{href:"https://chat.almalinux.org/almalinux/channels/mirrors",target:"_blank",rel:"noopener noreferrer"}},[r._v("mirrors channel on Mattermost"),t("OutboundLink")],1),r._v(" for any questions\nas well as updates from our team that impact mirror hosts in a live interactive format.")])]),r._v(" "),t("li",[t("p",[r._v("Fork the "),t("a",{attrs:{href:"https://github.com/AlmaLinux/mirrors/",target:"_blank",rel:"noopener noreferrer"}},[r._v("github.com/AlmaLinux/mirrors"),t("OutboundLink")],1),r._v("\nrepository and create a pull request that will add a YAML file describing\nyour mirror to the "),t("code",[r._v("mirrors.d")]),r._v(" directory.\nYou can use the "),t("a",{attrs:{href:"https://github.com/AlmaLinux/mirrors/blob/master/mirrors.d/repo.almalinux.org.yml",target:"_blank",rel:"noopener noreferrer"}},[r._v("official AlmaLinux repo file"),t("OutboundLink")],1),r._v("\nas an example. Your mirror does not have to provide all the protocols\nthat our main mirror provides, but either HTTP or HTTPS is required.")]),r._v(" "),t("p",[r._v("More information about creating a pull request can be found in the\n"),t("a",{attrs:{href:"https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request",target:"_blank",rel:"noopener noreferrer"}},[r._v("GitHub documentation"),t("OutboundLink")],1),r._v(".\nAfter reviewing the pull request your mirror will be published at the\n"),t("a",{attrs:{href:"https://mirrors.almalinux.org/",target:"_blank",rel:"noopener noreferrer"}},[r._v("mirrors.almalinux.org"),t("OutboundLink")],1),r._v(" page and will\nbe added to the mirrorlists that dnf package manager works with.")])])]),r._v(" "),t("p",[r._v("All mirror hosts are eligible for membership to the AlmaLinux OS Foundation.\nMake sure you submit your "),t("a",{attrs:{href:"https://almalinux.org/foundation/members/",target:"_blank",rel:"noopener noreferrer"}},[r._v("application for membership"),t("OutboundLink")],1),r._v("!")])])}),[],!1,null,null,null);e.default=n.exports}}]);